(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7884:(e,l,t)=>{Promise.resolve().then(t.bind(t,9282))},9282:(e,l,t)=>{"use strict";t.d(l,{default:()=>f});var a=t(5155),n=t(2115),r=t(8200);let s=e=>{let{cell:l,onLeftClick:t,onRightClick:s,gameStatus:i}=e,o=(0,n.useRef)(null),c=(0,n.useRef)(null),u=(0,n.useCallback)(e=>{if("playing"!==i)return;let t=e.touches[0];c.current={x:t.clientX,y:t.clientY},o.current=setTimeout(()=>{s(l.row,l.col)},500)},[i,l.row,l.col,s]),d=(0,n.useCallback)(e=>{if(o.current&&(clearTimeout(o.current),o.current=null),"playing"!==i)return;let a=e.changedTouches[0];if(c.current){let e=Math.abs(a.clientX-c.current.x),n=Math.abs(a.clientY-c.current.y);e<10&&n<10&&!l.isRevealed&&!l.isFlagged&&t(l.row,l.col)}c.current=null},[i,l.row,l.col,l.isRevealed,l.isFlagged,t]),g=(0,n.useCallback)(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]);return(0,n.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]),(0,a.jsx)(r.A,{sx:(()=>{let e={width:32,height:32,minWidth:32,padding:0,fontSize:"0.875rem",fontWeight:"bold",border:"1px solid #9ca3af",borderRadius:0};if(l.isRevealed)if(l.isMine)return{...e,backgroundColor:"#ef4444",color:"white","&:hover":{backgroundColor:"#ef4444"}};else return{...e,backgroundColor:"#e5e7eb",color:({1:"#2563eb",2:"#16a34a",3:"#dc2626",4:"#9333ea",5:"#ca8a04",6:"#db2777",7:"#000000",8:"#4b5563"})[l.neighborMines]||"#000000","&:hover":{backgroundColor:"#e5e7eb"}};return l.isFlagged?{...e,backgroundColor:"#fef3c7","&:hover":{backgroundColor:"#fde68a"}}:{...e,backgroundColor:"#d1d5db","&:hover":{backgroundColor:"#9ca3af"},"&:active":{backgroundColor:"#6b7280"}}})(),onClick:()=>{"playing"!==i||l.isRevealed||l.isFlagged||t(l.row,l.col)},onContextMenu:e=>{e.preventDefault(),"playing"===i&&s(l.row,l.col)},onTouchStart:u,onTouchEnd:d,onTouchMove:g,disabled:"playing"!==i,children:l.isFlagged?"\uD83D\uDEA9":l.isRevealed?l.isMine?"\uD83D\uDCA3":l.neighborMines>0?l.neighborMines.toString():"":""})},i=e=>{let{gameState:l,onCellClick:t,onCellRightClick:n}=e;return(0,a.jsx)("div",{className:"inline-grid gap-0 border-2 border-gray-500 bg-gray-600 p-2 rounded-lg shadow-lg",style:{gridTemplateColumns:"repeat(".concat(l.cols,", 1fr)"),gridTemplateRows:"repeat(".concat(l.rows,", 1fr)")},children:l.board.map((e,r)=>e.map((e,i)=>(0,a.jsx)(s,{cell:e,onLeftClick:t,onRightClick:n,gameStatus:l.gameStatus},"".concat(r,"-").concat(i))))})},o={BEGINNER:{rows:9,cols:9,mines:10},INTERMEDIATE:{rows:16,cols:16,mines:40},EXPERT:{rows:16,cols:30,mines:99}};function c(e,l){return Array(e).fill(null).map((e,t)=>Array(l).fill(null).map((e,l)=>({isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0,row:t,col:l})))}var u=t(9816),d=t(7348),g=t(4014),m=t(6673);let f=()=>{let[e,l]=(0,n.useState)("BEGINNER"),[t,s]=(0,n.useState)(()=>{let l=o[e];return{board:c(l.rows,l.cols),gameStatus:"playing",mineCount:l.mines,flagCount:0,rows:l.rows,cols:l.cols}}),[f,h]=(0,n.useState)(!0),b=(0,n.useCallback)(e=>{let t=o[e];s({board:c(t.rows,t.cols),gameStatus:"playing",mineCount:t.mines,flagCount:0,rows:t.rows,cols:t.cols}),h(!0),l(e)},[]),x=(0,n.useCallback)(e=>{b(e.target.value)},[b]),p=(0,n.useCallback)((e,l)=>{"playing"===t.gameStatus&&s(t=>{let a=t.board;return(f&&(a=function(e,l,t,a){let n=e.map(e=>e.map(e=>({...e}))),r=n.length,s=n[0].length,i=0;for(;i<l;){let e=Math.floor(Math.random()*r),l=Math.floor(Math.random()*s);!n[e][l].isMine&&(e!==t||l!==a)&&(n[e][l].isMine=!0,i++)}return function(e){let l=e.map(e=>e.map(e=>({...e}))),t=l.length,a=l[0].length;for(let e=0;e<t;e++)for(let n=0;n<a;n++)if(!l[e][n].isMine){let r=0;for(let s=-1;s<=1;s++)for(let i=-1;i<=1;i++){let o=e+s,c=n+i;o>=0&&o<t&&c>=0&&c<a&&l[o][c].isMine&&r++}l[e][n].neighborMines=r}return l}(n)}(a,t.mineCount,e,l),h(!1)),a[e][l].isMine)?{...t,board:a.map(e=>e.map(e=>e.isMine?{...e,isRevealed:!0}:e)),gameStatus:"lost"}:!function(e){for(let l=0;l<e.length;l++)for(let t=0;t<e[l].length;t++){let a=e[l][t];if(!a.isMine&&!a.isRevealed)return!1}return!0}(a=function(e,l,t){let a=e.map(e=>e.map(e=>({...e}))),n=a.length,r=a[0].length;return!function e(l,t){if(!(l<0)&&!(l>=n)&&!(t<0)&&!(t>=r)&&!a[l][t].isRevealed&&!a[l][t].isFlagged&&(a[l][t].isRevealed=!0,0===a[l][t].neighborMines&&!a[l][t].isMine))for(let a=-1;a<=1;a++)for(let n=-1;n<=1;n++)e(l+a,t+n)}(l,t),a}(a,e,l))?{...t,board:a}:{...t,board:a,gameStatus:"won"}})},[t.gameStatus,f]),v=(0,n.useCallback)((e,l)=>{"playing"===t.gameStatus&&s(t=>{let a=function(e,l,t){let a=e.map(e=>e.map(e=>({...e})));return a[l][t].isRevealed||(a[l][t].isFlagged=!a[l][t].isFlagged),a}(t.board,e,l),n=a.flat().filter(e=>e.isFlagged).length;return{...t,board:a,flagCount:n}})},[t.gameStatus]);return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-4xl w-full",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center text-gray-800 mb-8",children:"\uD83D\uDCA3 Minesweeper"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-center mb-6",children:[(0,a.jsxs)(u.A,{sx:{minWidth:240},children:[(0,a.jsx)(d.A,{id:"difficulty-label",children:"Difficulty"}),(0,a.jsxs)(g.A,{labelId:"difficulty-label",value:e,label:"Difficulty",onChange:x,children:[(0,a.jsx)(m.A,{value:"BEGINNER",children:"Beginner (9x9, 10 mines)"}),(0,a.jsx)(m.A,{value:"INTERMEDIATE",children:"Intermediate (16x16, 40 mines)"}),(0,a.jsx)(m.A,{value:"EXPERT",children:"Expert (16x30, 99 mines)"})]})]}),(0,a.jsx)(r.A,{variant:"contained",onClick:()=>b(e),sx:{px:3,py:1.5,fontWeight:"medium"},children:"New Game"})]}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-2 ".concat((()=>{switch(t.gameStatus){case"won":return"text-green-600";case"lost":return"text-red-600";default:return"text-blue-600"}})()),children:(()=>{switch(t.gameStatus){case"won":return"\uD83C\uDF89 You Won!";case"lost":return"\uD83D\uDCA5 Game Over!";default:return"\uD83C\uDFAF Good Luck!"}})()}),(0,a.jsxs)("div",{className:"flex justify-center gap-8 text-gray-700",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Mines:"})," ",t.mineCount]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Flags:"})," ",t.flagCount]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Remaining:"})," ",t.mineCount-t.flagCount]})]}),(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"block md:hidden",children:"\uD83D\uDCF1 Mobile: Tap to reveal • Long press to flag \uD83D\uDEA9"}),(0,a.jsx)("div",{className:"hidden md:block",children:"\uD83D\uDDB1️ Desktop: Left click to reveal • Right click to flag \uD83D\uDEA9"})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i,{gameState:t,onCellClick:p,onCellRightClick:v})})]})})}}},e=>{e.O(0,[381,441,964,358],()=>e(e.s=7884)),_N_E=e.O()}]);